package bean2;

import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.beans.PropertyVetoException;
import java.beans.VetoableChangeListener;
import java.beans.VetoableChangeSupport;
import java.io.Serializable;

public class ProduitBean2 implements Serializable{
	
	protected int oldquantiteStock;
	protected int quantiteStock;
	protected String nomProduit;
	protected boolean enStock;
	protected boolean oldenStock;
	  
	  //protected String oldNom;
	 // protected String nom;
	  
	  PropertyChangeSupport changeSupport;
	  VetoableChangeSupport vetoableSupport;
	  
	  public ProduitBean2(){ 
		  quantiteStock = 0; 
		  oldquantiteStock = 0;
		  
		  oldenStock=false;
		  enStock=false;
		  
	    
	    //nom="Compteur";
	    //oldNom="OldNom";
	    
	    changeSupport = new PropertyChangeSupport(this);
	    vetoableSupport = new VetoableChangeSupport(this);     
	  }
	  
	   
	  public synchronized void setQuantiteStock(int val) {
	    oldquantiteStock = quantiteStock;
	    quantiteStock = val;
	    
	    try {  
	      vetoableSupport.fireVetoableChange("quantiteStock",new Integer(oldquantiteStock),
	              new Integer(quantiteStock));    
	    } catch(PropertyVetoException e) {     
	      System.out.println("MonBean, un veto est emis :  "+e.getMessage());
	      quantiteStock = oldquantiteStock;
	    }
	    if ( quantiteStock != oldquantiteStock ) {   
	      changeSupport.firePropertyChange("quantiteStock",oldquantiteStock,quantiteStock);
	    }
	    
	  }
	  
	  public synchronized void setEnStock(boolean state) {
		    boolean oldenStock = enStock;
		    enStock = state;
		    
		    try {  
		        vetoableSupport.fireVetoableChange("enStock", new Boolean(oldenStock), enStock);    
		    } catch(PropertyVetoException e) {     
		        System.out.println("MonBean, un veto est emis :  " + e.getMessage());
		        enStock = oldenStock;
		    }
		    if (enStock !=oldenStock) {   
		        changeSupport.firePropertyChange("enStock", oldenStock, enStock);
		    }
		}

	  
	  public synchronized int getValeur() {
	    return valeur;
	  }
	  
	  public synchronized String getNom() {
		    return nom;
		  }
	  
	  
	  public synchronized void incrementer() {
	    	oldValeur = valeur;
		    valeur = valeur + 1;
	    	try {  
	  	      vetoableSupport.fireVetoableChange("valeur",new Integer(oldValeur),
	  	              new Integer(valeur));    
	  	    } catch(PropertyVetoException e) {     
	  	      System.out.println("MonBean, un veto est emis :  "+e.getMessage());
	  	      valeur = oldValeur;
	  	    }
	  	    if ( valeur != oldValeur ) {   
	  	      changeSupport.firePropertyChange("valeur",oldValeur,valeur);
	  	    }
	    }

	    public synchronized void decrementer()  {
	    	oldValeur = valeur;
		    valeur = valeur - 1;
	    	try {  
	  	      vetoableSupport.fireVetoableChange("valeur",new Integer(oldValeur),
	  	              new Integer(valeur));    
	  	    } catch(PropertyVetoException e) {     
	  	      System.out.println("MonBean, un veto est emis :  "+e.getMessage());
	  	      valeur = oldValeur;
	  	    }
	  	    if ( valeur != oldValeur ) {   
	  	      changeSupport.firePropertyChange("valeur",oldValeur,valeur);
	  	    }
	    }
	  
	  
	  public synchronized void addPropertyChangeListener(PropertyChangeListener listener) {
	    changeSupport.addPropertyChangeListener(listener);
	  }
	  
	  public synchronized void removePropertyChangeListener(PropertyChangeListener listener) {
	    changeSupport.removePropertyChangeListener(listener);
	  }
	  public synchronized void addVetoableChangeListener(VetoableChangeListener listener) {
	    vetoableSupport.addVetoableChangeListener(listener);
	  }
	  public synchronized void removeVetoableChangeListener(VetoableChangeListener listener) {
	    vetoableSupport.removeVetoableChangeListener(listener);
	  } 

}
